<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Career Impact Tracker</title>
		<script
			crossorigin
			src="https://unpkg.com/react@18/umd/react.production.min.js"
		></script>
		<script
			crossorigin
			src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
		></script>
		<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/react-tabler-icons@3.11.0/umd/react-tabler-icons.min.js"></script>
		<script src="https://cdn.tailwindcss.com"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
	</head>
	<body>
		<div id="root"></div>

		<script type="text/babel">
			const { useState, useEffect, useRef } = React;

			// Icon components
			const Tabler = window.TablerIcons;

			const TablerIcon = ({ name, className = "", size = 20 }) => {
				if (!Tabler || !Tabler[name]) {
					console.warn(`Icon ${name} not found in Tabler Icons.`);

					return <span className={`w-${size / 4} h-${size / 4}`}>?</span>;
				}

				const IconComponent = Tabler[name];

				return <IconComponent className={className} size={size} />;
			};

			const PlusIcon = (props) => <TablerIcon name="IconPlus" {...props} />;

			const TrashIcon = (props) => <TablerIcon name="IconTrash" {...props} />;

			const DownloadIcon = (props) => (
				<TablerIcon name="IconDownload" {...props} size={16} />
			);

			const UploadIcon = (props) => (
				<TablerIcon name="IconUpload" {...props} size={16} />
			);

			const SaveIcon = (props) => (
				<TablerIcon name="IconDeviceFloppy" {...props} size={16} />
			); // Floppy disk is a classic "save" icon

			const FileTextIcon = (props) => (
				<TablerIcon name="IconFileText" {...props} size={16} />
			);

			const XIcon = (props) => <TablerIcon name="IconX" {...props} size={16} />;

			const TargetIcon = (props) => <TablerIcon name="IconRocket" {...props} />; // Technical Problem-Solving

			const UsersIcon = (props) => <TablerIcon name="IconUsers" {...props} />; // Training & Enablement

			const TrendingUpIcon = (props) => (
				<TablerIcon name="IconChartArea" {...props} />
			); // Process Improvement (using a chart for improvement)

			const ClockIcon = (props) => (
				<TablerIcon name="IconClockHour9" {...props} />
			); // Time/Cost Savings

			const DollarSignIcon = (props) => (
				<TablerIcon name="IconCurrencyDollar" {...props} />
			); // Revenue Impact

			const DatabaseIcon = (props) => (
				<TablerIcon name="IconDatabase" {...props} />
			); // Data Quality & Governance

			const ImpactTracker = () => {
				const pdfRef = useRef();

				const defaultImpacts = [
					{
						id: 1,
						date: "2024-09",
						project: "Import Tool Documentation & Training",
						category: "enablement",
						description:
							"Created documentation and trained launch team on internal importing tool",
						metrics:
							"Reduced import requests to tech consultants by ~40%, saving 8-10 hours/week",
						businessValue:
							"Enabled launch team to handle 5+ additional implementations per month without additional headcount",
						skills: [
							"Technical writing",
							"Training delivery",
							"Process improvement",
						],
					},
				];

				const availableSkills = [
					"SQL",
					"Data analysis",
					"Looker",
					"Analytics",
					"Technical writing",
					"Training delivery",
					"Process improvement",
					"Stakeholder management",
					"Project management",
					"Problem-solving",
					"Documentation",
					"Customer success",
					"Cross-functional collaboration",
					"Requirements gathering",
					"System configuration",
					"Troubleshooting",
					"Data visualization",
					"Business analysis",
					"Product analytics",
					"Communication",
				];

				const [impacts, setImpacts] = useState(() => {
					const saved = localStorage.getItem("careerImpacts");
					return saved ? JSON.parse(saved) : defaultImpacts;
				});

				const [newImpact, setNewImpact] = useState({
					date: "",
					project: "",
					category: "technical",
					description: "",
					metrics: "",
					businessValue: "",
					skills: [],
				});

				const [saveMessage, setSaveMessage] = useState("");
				const [customSkill, setCustomSkill] = useState("");

				useEffect(() => {
					localStorage.setItem("careerImpacts", JSON.stringify(impacts));
					if (impacts.length > 0) {
						setSaveMessage("‚úì Auto-saved");
						setTimeout(() => setSaveMessage(""), 2000);
					}
				}, [impacts]);

				const categories = {
					technical: {
						label: "Technical Problem-Solving",
						icon: TargetIcon,
						color: "bg-blue-100 text-blue-700",
					},
					enablement: {
						label: "Training & Enablement",
						icon: UsersIcon,
						color: "bg-green-100 text-green-700",
					},
					process: {
						label: "Process Improvement",
						icon: TrendingUpIcon,
						color: "bg-purple-100 text-purple-700",
					},
					efficiency: {
						label: "Time/Cost Savings",
						icon: ClockIcon,
						color: "bg-orange-100 text-orange-700",
					},
					revenue: {
						label: "Revenue Impact",
						icon: DollarSignIcon,
						color: "bg-emerald-100 text-emerald-700",
					},
					data: {
						label: "Data Quality & Governance",
						icon: DatabaseIcon,
						color: "bg-blue-100 text-blue-700",
					},
				};

				const addImpact = () => {
					if (newImpact.project && newImpact.description) {
						setImpacts([...impacts, { ...newImpact, id: Date.now() }]);
						setNewImpact({
							date: "",
							project: "",
							category: "technical",
							description: "",
							metrics: "",
							businessValue: "",
							skills: [],
						});
					}
				};

				const deleteImpact = (id) => {
					if (confirm("Are you sure you want to delete this impact?")) {
						setImpacts(impacts.filter((i) => i.id !== id));
					}
				};

				const toggleSkill = (skill) => {
					setNewImpact((prev) => ({
						...prev,
						skills: prev.skills.includes(skill)
							? prev.skills.filter((s) => s !== skill)
							: [...prev.skills, skill],
					}));
				};

				const addCustomSkill = () => {
					if (
						customSkill.trim() &&
						!newImpact.skills.includes(customSkill.trim())
					) {
						setNewImpact((prev) => ({
							...prev,
							skills: [...prev.skills, customSkill.trim()],
						}));
						setCustomSkill("");
					}
				};

				const removeSkill = (skill) => {
					setNewImpact((prev) => ({
						...prev,
						skills: prev.skills.filter((s) => s !== skill),
					}));
				};

				const exportToText = () => {
					const text = impacts
						.map(
							(i) =>
								`${i.date} - ${i.project}\n` +
								`Category: ${categories[i.category].label}\n` +
								`Description: ${i.description}\n` +
								`Metrics: ${i.metrics}\n` +
								`Business Value: ${i.businessValue}\n` +
								`Skills Used: ${
									Array.isArray(i.skills) ? i.skills.join(", ") : i.skills
								}\n` +
								`---\n`
						)
						.join("\n");

					const blob = new Blob([text], { type: "text/plain" });
					const url = URL.createObjectURL(blob);
					const a = document.createElement("a");
					a.href = url;
					a.download = `career-impact-log-${
						new Date().toISOString().split("T")[0]
					}.txt`;
					a.click();
				};

				const exportToPDF = () => {
					if (typeof html2pdf === "undefined") {
						alert(
							"PDF library is still loading. Please wait a moment and try again."
						);
						return;
					}

					const element = pdfRef.current;

					// Clone the element to avoid modifying the display
					const clone = element.cloneNode(true);

					// Remove delete buttons from clone
					const deleteButtons = clone.querySelectorAll(".delete-button");

					deleteButtons.forEach((btn) => btn.remove());

					const opt = {
						margin: 0.5,
						filename: `career-impact-portfolio-${
							new Date().toISOString().split("T")[0]
						}.pdf`,
						image: { type: "jpeg", quality: 0.98 },
						html2canvas: {
							scale: 2,
							useCORS: true,
							logging: false,
							backgroundColor: "#f9fafb",
						},
						jsPDF: { unit: "in", format: "letter", orientation: "portrait" },
					};

					setSaveMessage("‚è≥ Generating PDF...");

					html2pdf()
						.set(opt)
						.from(clone)
						.save()
						.then(() => {
							setSaveMessage("‚úì PDF downloaded!");
							setTimeout(() => setSaveMessage(""), 3000);
						})
						.catch((err) => {
							console.error("PDF generation error:", err);
							setSaveMessage("‚ùå PDF generation failed");
							setTimeout(() => setSaveMessage(""), 3000);
						});
				};

				const backupToFile = () => {
					const dataStr = JSON.stringify(impacts, null, 2);
					const blob = new Blob([dataStr], { type: "application/json" });
					const url = URL.createObjectURL(blob);
					const a = document.createElement("a");
					a.href = url;
					a.download = `impact-tracker-backup-${
						new Date().toISOString().split("T")[0]
					}.json`;
					a.click();
					setSaveMessage("‚úì Backup saved to Downloads");
					setTimeout(() => setSaveMessage(""), 3000);
				};

				const restoreFromFile = (event) => {
					const file = event.target.files[0];
					if (file) {
						const reader = new FileReader();
						reader.onload = (e) => {
							try {
								const data = JSON.parse(e.target.result);
								if (Array.isArray(data)) {
									setImpacts(data);
									setSaveMessage("‚úì Data restored successfully");
									setTimeout(() => setSaveMessage(""), 3000);
								} else {
									alert("Invalid file format");
								}
							} catch (error) {
								alert("Error reading file: " + error.message);
							}
						};
						reader.readAsText(file);
					}
					event.target.value = "";
				};

				return (
					<div className="max-w-6xl mx-auto p-6 bg-gray-50 min-h-screen">
						<div className="mb-8">
							<div className="flex justify-between items-start">
								<div>
									<h1 className="text-3xl font-bold text-gray-800 mb-2">
										Career Impact Tracker
									</h1>
									<p className="text-gray-600">
										Document your wins, quantify your value, and build your
										career story.
									</p>
								</div>
								{saveMessage && (
									<div className="text-green-600 text-sm font-medium bg-green-50 px-3 py-2 rounded">
										{saveMessage}
									</div>
								)}
							</div>
						</div>

						<div className="bg-white rounded-lg shadow-md p-6 mb-6">
							<h2 className="text-xl font-semibold mb-4 flex items-center gap-2">
								<PlusIcon />
								Add New Impact
							</h2>
							<div className="grid grid-cols-1 md:grid-cols-2 gap-4">
								<div>
									<label className="block text-sm font-medium text-gray-700 mb-1">
										Date
									</label>
									<input
										type="month"
										className="w-full px-3 py-2 border border-gray-300 rounded-md"
										value={newImpact.date}
										onChange={(e) =>
											setNewImpact({ ...newImpact, date: e.target.value })
										}
									/>
								</div>
								<div>
									<label className="block text-sm font-medium text-gray-700 mb-1">
										Category
									</label>
									<select
										className="w-full px-3 py-2 border border-gray-300 rounded-md"
										value={newImpact.category}
										onChange={(e) =>
											setNewImpact({ ...newImpact, category: e.target.value })
										}
									>
										{Object.entries(categories).map(([key, val]) => (
											<option key={key} value={key}>
												{val.label}
											</option>
										))}
									</select>
								</div>
								<div className="md:col-span-2">
									<label className="block text-sm font-medium text-gray-700 mb-1">
										Project/Initiative Name
									</label>
									<input
										type="text"
										placeholder="e.g., Jira Heat Map Creation"
										className="w-full px-3 py-2 border border-gray-300 rounded-md"
										value={newImpact.project}
										onChange={(e) =>
											setNewImpact({ ...newImpact, project: e.target.value })
										}
									/>
								</div>
								<div className="md:col-span-2">
									<label className="block text-sm font-medium text-gray-700 mb-1">
										What You Did
									</label>
									<textarea
										placeholder="Describe the action you took..."
										className="w-full px-3 py-2 border border-gray-300 rounded-md"
										rows="2"
										value={newImpact.description}
										onChange={(e) =>
											setNewImpact({
												...newImpact,
												description: e.target.value,
											})
										}
									/>
								</div>
								<div className="md:col-span-2">
									<label className="block text-sm font-medium text-gray-700 mb-1">
										Quantifiable Metrics
									</label>
									<textarea
										placeholder="e.g., Reduced tickets by 25%, saved 10 hours/week, trained 8 team members..."
										className="w-full px-3 py-2 border border-gray-300 rounded-md"
										rows="2"
										value={newImpact.metrics}
										onChange={(e) =>
											setNewImpact({ ...newImpact, metrics: e.target.value })
										}
									/>
								</div>
								<div className="md:col-span-2">
									<label className="block text-sm font-medium text-gray-700 mb-1">
										Business Value / Impact
									</label>
									<textarea
										placeholder="Why it mattered to the company: prevented churn, enabled scaling, improved customer satisfaction..."
										className="w-full px-3 py-2 border border-gray-300 rounded-md"
										rows="2"
										value={newImpact.businessValue}
										onChange={(e) =>
											setNewImpact({
												...newImpact,
												businessValue: e.target.value,
											})
										}
									/>
								</div>
								<div className="md:col-span-2">
									<label className="block text-sm font-medium text-gray-700 mb-2">
										Skills Demonstrated
									</label>

									{newImpact.skills.length > 0 && (
										<div className="flex flex-wrap gap-2 mb-3">
											{newImpact.skills.map((skill) => (
												<span
													key={skill}
													className="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-sm flex items-center gap-1"
												>
													{skill}
													<button
														onClick={() => removeSkill(skill)}
														className="hover:text-blue-900"
													>
														<XIcon />
													</button>
												</span>
											))}
										</div>
									)}

									<div className="flex flex-wrap gap-2 mb-3">
										{availableSkills
											.filter((s) => !newImpact.skills.includes(s))
											.map((skill) => (
												<button
													key={skill}
													onClick={() => toggleSkill(skill)}
													className="bg-gray-100 hover:bg-blue-100 text-gray-700 hover:text-blue-700 px-3 py-1 rounded-full text-sm transition-colors"
												>
													+ {skill}
												</button>
											))}
									</div>

									<div className="flex gap-2">
										<input
											type="text"
											placeholder="Add custom skill..."
											className="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
											value={customSkill}
											onChange={(e) => setCustomSkill(e.target.value)}
											onKeyPress={(e) =>
												e.key === "Enter" &&
												(e.preventDefault(), addCustomSkill())
											}
										/>
										<button
											onClick={addCustomSkill}
											className="px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 text-sm"
										>
											Add
										</button>
									</div>
								</div>
							</div>
							<button
								onClick={addImpact}
								className="mt-4 px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2"
							>
								<PlusIcon />
								Add Impact
							</button>
						</div>

						<div className="mb-6 flex flex-wrap justify-between items-center gap-3">
							<h2 className="text-xl font-semibold">
								Your Impact Log ({impacts.length})
							</h2>
							<div className="flex flex-wrap gap-2">
								<button
									onClick={exportToPDF}
									className="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 flex items-center gap-2 text-sm"
								>
									<FileTextIcon size={16} />
									Export PDF
								</button>
								<button
									onClick={exportToText}
									className="px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 flex items-center gap-2 text-sm"
								>
									<DownloadIcon size={16} />
									Export Text
								</button>
								<button
									onClick={backupToFile}
									className="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-2 text-sm"
								>
									<SaveIcon size={16} />
									Backup Data
								</button>
								<label className="px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 flex items-center gap-2 text-sm cursor-pointer">
									<UploadIcon size={16} />
									Restore Data
									<input
										type="file"
										accept=".json"
										onChange={restoreFromFile}
										className="hidden"
									/>
								</label>
							</div>
						</div>

						<div ref={pdfRef} className="space-y-4">
							{impacts.map((impact) => {
								const CategoryIcon = categories[impact.category]?.icon;
								const skillsArray = Array.isArray(impact.skills)
									? impact.skills
									: typeof impact.skills === "string"
									? impact.skills.split(",").map((s) => s.trim())
									: [];

								return (
									<div
										key={impact.id}
										className="bg-white rounded-lg shadow-md p-6"
									>
										<div className="flex justify-between items-start mb-3">
											<div className="flex items-start gap-3 flex-1">
												<span
													className={`px-3 py-1 rounded-full text-sm font-medium flex items-center gap-1 ${
														categories[impact.category]?.color ||
														"bg-gray-100 text-gray-700"
													}`}
												>
													{CategoryIcon && <CategoryIcon size={16} />}

													{categories[impact.category]?.label ||
														"Uncategorized"}
												</span>
												<div className="flex-1">
													<h3 className="font-semibold text-lg text-gray-800">
														{impact.project}
													</h3>
													<p className="text-sm text-gray-500">{impact.date}</p>
												</div>
											</div>
											<button
												onClick={() => deleteImpact(impact.id)}
												className="text-red-500 hover:text-red-700 p-1 print:hidden delete-button"
											>
												<TrashIcon />
											</button>
										</div>

										<div className="space-y-3">
											<div>
												<p className="text-sm font-medium text-gray-700 mb-1">
													What You Did:
												</p>
												<p className="text-gray-600">{impact.description}</p>
											</div>

											{impact.metrics && (
												<div>
													<p className="text-sm font-medium text-gray-700 mb-1">
														Metrics:
													</p>
													<p className="text-gray-600">{impact.metrics}</p>
												</div>
											)}

											{impact.businessValue && (
												<div>
													<p className="text-sm font-medium text-gray-700 mb-1">
														Business Value:
													</p>
													<p className="text-gray-600">
														{impact.businessValue}
													</p>
												</div>
											)}

											{skillsArray.length > 0 && (
												<div>
													<p className="text-sm font-medium text-gray-700 mb-2">
														Skills:
													</p>
													<div className="flex flex-wrap gap-2">
														{skillsArray.map((skill) => (
															<span
																key={skill}
																className="bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs"
															>
																{skill}
															</span>
														))}
													</div>
												</div>
											)}
										</div>
									</div>
								);
							})}
						</div>

						<div className="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6">
							<h3 className="font-semibold text-blue-900 mb-3">
								üí° How Your Data is Saved
							</h3>
							<ul className="space-y-2 text-sm text-blue-800">
								<li>
									<strong>Auto-save:</strong> Your data is automatically saved
									to your browser as you work
								</li>
								<li>
									<strong>Export PDF:</strong> Download a beautifully formatted
									PDF portfolio of all your impacts
								</li>
								<li>
									<strong>Backup Data:</strong> Download a backup file you can
									save to cloud storage
								</li>
								<li>
									<strong>Restore Data:</strong> Upload a previous backup to
									restore or transfer your data
								</li>
								<li>
									<strong>Export Text:</strong> Get a plain text version for
									copying into documents
								</li>
							</ul>
						</div>

						<div className="mt-4 bg-green-50 border border-green-200 rounded-lg p-6">
							<h3 className="font-semibold text-green-900 mb-3">
								üìù Tips for Tracking Impact
							</h3>
							<ul className="space-y-2 text-sm text-green-800">
								<li>
									<strong>Track as you go:</strong> Add entries right after
									completing something notable
								</li>
								<li>
									<strong>Use the date picker:</strong> Select the month you
									completed the work
								</li>
								<li>
									<strong>Tag your skills:</strong> Click skill buttons to
									quickly add them, or type custom ones
								</li>
								<li>
									<strong>Export PDF monthly:</strong> Keep updated portfolios
									for performance reviews
								</li>
								<li>
									<strong>Backup regularly:</strong> Click "Backup Data" monthly
									to protect your work
								</li>
							</ul>
						</div>
					</div>
				);
			};

			ReactDOM.render(<ImpactTracker />, document.getElementById("root"));
		</script>
	</body>
</html>
